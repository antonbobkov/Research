\documentclass{amsart}

\usepackage{../AMC_style}	
\usepackage{../Research}

\usepackage{diagrams}

  \newcommand{\A}{\mathcal A}
  \newcommand{\B}{\mathcal B}
\renewcommand{\C}{\mathcal C}
  \newcommand{\D}{\mathcal D}
\renewcommand{\H}{\mathcal H}
  \newcommand{\G}{\mathcal G}
  \newcommand{\M}{\mathcal M}

  \newcommand{\K}{\boldface K_\alpha}
\renewcommand{\S}{S_\alpha}

\begin{document}

\title{A note on quantifier elimination in Shelah-Spencer graphs}
\author{Anton Bobkov}
\email{bobkov@math.ucla.edu}

\begin{abstract}
	We simplify \cite{Laskowski}'s proof of quantifier elimination in Shelah-Spencer graphs.
\end{abstract}

\maketitle

\section{Introduction}

Laskowski's paper \cite{Laskowski} provides a combinatorial proof of quantifier elimination in Shelah-Spencer graphs. Here we provide a simplification of the proof using only maximal chains and avoiding the use of proposition 3.1 and technical lemmas of section 4.

We will use notation of \cite{Laskowski}, in particular things like $\K$, $\delta(\A/\B)$, $X_m(\A)$, $\S$, $\B^* \sqsubseteq \B'$,maximal embedding, $\Delta_\A(x)$, $\Psi_{\A,\B}(x)$ etc. However we will give a different definition of $Y(\ldots)$. When we write formulas $\theta(x,y)$ we may have $x,y$ to be tuples.

\section{Omitting lemma}

\begin{Definition}
	Let $\M \models \S$, $\B \in \K$, embedding $f \colon \B \to \M$, $\Phi$ finite subset of $\K$
	\begin{enumerate}
		\item Say that $f$ \textsl{omits} $\Phi$ if there are no $\C \in \Phi$ and $g \colon \C \to \M$ extending $f$.
		\item Say that $f$ \textsl{admits} $\Phi$ if for every $\C \in \Phi$ there is $g \colon \C \to \M$ extending $f$.
	\end{enumerate}
\end{Definition}

\begin{Note} \label{AA}
	Take notation as above and a structure $\C \in \K$ extending $\B$. Then $f$ doesn't omit $\{\C\}$ iff $f$ admits $\{\C\}$.
\end{Note}

\begin{Definition}
	Fix $\B, \C \in \K$, and $m \in \omega$ such that $|C \backslash B| < m$. Define $Z(\B, \C, m)$ to be all $\B^* \in X_m(\B)$ such that there are no $\H$ with $|H \backslash B^*| < m$ satisfying
		\begin{diagram}
							&							&\H		\\
							&\ruLine^\leq	&					&\luLine	\\
				\B^*	&           	&					&					&\C \\
							&\luLine			&					&\ruLine	\\
							&							&\B
		\end{diagram}
\end{Definition}

\begin{Lemma} \label{A}
	Let $\B, \C \in \K$, and $m \in \omega$ such that $|C \backslash B| < m$. Also let $\M \models \S$ and $f \colon \B \to \M$ an embedding. The following are equivalent:
	\begin{enumerate}
		\item $f$ omits $\{\C\}$.
		\item There exists $\B^* \in Z(\B, \C, m)$ maximally embeddable into $\M$ over $f$.
	\end{enumerate}
\end{Lemma}

\begin{proof}
	For the proof we identify $\B$ with $f(\B)$, i.e. for ease of notation assume that $\B \subset \M$.
	
	$(1) \Rightarrow (2)$  By remark 5.3 of \cite{Laskowski} there is some $B^* \in X_m(\B)$ maximally embeddable in $\M$ over $f$. Such embedding is unique by Lemma 3.8 of \cite{Laskowski}. Again, we identify $B^*$ with its maximal embedding into $\M$. To show $(2)$ we need to verify that $\B^* \in Z(\B, \C, m)$. Suppose not. Then there is $\H$ with $|H \backslash B^*| < m$ satisfying
	\begin{diagram}
						&							&\H		\\
						&\ruLine^\leq	&					&\luLine	\\
			\B^*	&           	&					&					&\C \\
						&\luLine			&					&\ruLine	\\
						&							&\B
	\end{diagram}
	As $\B^* \leq \H$ and $\B \subset \M$ we can embed $\H$ into $\M$ (as $\M \models \S$). But this would witness $\C$ extending $\B$ in $\M$ which is impossible as we assumed that $f$ omits $\{\Phi\}$.
	
	$(2) \Rightarrow (1)$ Suppose $f$ doesn't omit $\{C\}$. Then by the note \ref{AA} $f$ admits $\{C\}$, i.e. there is an embedding of $\C$ into $M$ over $f$. We identify $\C$ with the image of that embedding. Similarly we identify $\B^*$ with the image of its maximal embedding over $f$. That is we may assume $\C, \B^* \subset \M$. Let $H$ be the substructure of $M$ induced by vertices $C \cup B^*$. As $|C \backslash B| < m$ we have $|H \backslash B^*| < m$. $\B^*$ is $m$-strong by remark 5.3 of \cite{Laskowski}. This forces $\B^* \leq H$. But this contradicts the fact that $\B^* \in Z(\B, \C, m)$.
\end{proof}

\begin{Corollary} \label{B}
	With the setup of the previous lemma, the following are equivalent:
	\begin{enumerate}
		\item $f$ admits $\{\C\}$.
		\item There exists $\B^* \in X_m(\B) \backslash Z(\B, \C, m)$ maximally embeddable into $\M$ over $f$.
	\end{enumerate}
\end{Corollary}

For quantifier elimination we need to track multiple structures being admitted and omitted, hence the following definition.

\begin{Definition}
	Let $\B \in \K$, $\Phi, \Gamma$ finite subsets of $\K$, and $m \in \omega$ such that for each $\C \in \Phi$ or $\C \in \Gamma$ we have $\B \subseteq \C$ and $|C \backslash B| < m$. Define
	\begin{align*}
		Y(\B, \Phi, \Gamma, m) = \{B^* \in X_m(\B) \mid \ 	&\forall \C \in \Phi \ B^* \in Z(\B, \C, m) \text{ and}\\
																												&\forall \D \in \Gamma \ B^* \notin Z(\B, \D, m)\}
	\end{align*}
\end{Definition}

\begin{Lemma} \label{C}
	Let $\B \in \K$, $\Phi, \Gamma$ finite subsets of $\K$, and $m \in \omega$ such that for each $\C \in \Phi$ or $\C \in \Gamma$ we have $\B \subseteq \C$ and $|C \backslash B| < m$. The following are equivalent:
	\begin{enumerate}
		\item $f$ omits $\Phi$ and admits $\Gamma$.
		\item There exists $\B^* \in Y(\B, \Phi, \Gamma, m)$ maximally embeddable into $\M$ over $f$.
	\end{enumerate}
\end{Lemma}
\begin{proof}
	Easy corollary of \ref{A} and \ref{B}.
\end{proof}

\section{Quantifier Elimination}

Following proof of 5.6 in \cite{Laskowski}, we have a formula $\theta(x, y)$, some $\A \subseteq \B \in \K$ with $\theta(x, y) \vdash \Delta_A(x) \wedge \Delta_\B(x, y)$. We may also assume that $\theta(x, y)$ is a conjunction of formulas of the type $\Psi_{\B, \C}(x,y)$ and their negations. More precisely
\begin{align*}
	\theta(x, y) \Leftrightarrow 	&\bigwedge_{\C \in \Phi} \Psi_{\B, \C}(x,y) \ \wedge \\
																&\bigwedge_{\D \in \Gamma} \neg \Psi_{\B, \D}(x,y)
\end{align*}
for some finite subsets $\Phi, \Gamma$ of $\K$. Let $m = \max\{ |C \backslash B| \mid \C \in \Phi \text{ or } \Gamma\}$. We claim that in $\S$
\begin{align*}
	\exists y \theta(x, y) 	&\Leftrightarrow \bigvee_{\B^* \in Y(\B, \Phi, \Gamma, m)} (\text{$\B^*$ maximally embeds over $\A$}) \\
													&\Leftrightarrow \bigvee_{\B^* \in Y(\B, \Phi, \Gamma, m)} \left(\Psi_{\A, \B^*}(x) \wedge \bigwedge_{\B* \sqsubseteq B', B' \in X_m(\B)} \neg \Psi_{\A, \B'}(x)\right)
\end{align*}

\begin{proof}
	$(\Rightarrow)$ Fix $\B \subset \M$ witnessing existential statement. By remark 5.3 and lemma 3.8 There is a unique $\B^* \in X_m$ (uniquely embedded) maximally embeddable into $\M$ over $\B$. By lemma \ref{C} $\B^* \in Y(\B, \Phi, \Gamma, m)$.
	
	$(\Leftarrow)$ Take the embedding $g\colon B^* \to \M$ and restrict it to $\B \subseteq \B^*$ i.e. $f = g \mid \B$. As $\B^* \in Y(\B, \Phi, \Gamma, m)$ by lemma \ref{C} $f$ omits $\Phi$ and admits $\Gamma$. Thus is is a witness to $\exists y \theta(x, y)$.
\end{proof}

\begin{thebibliography}{9}

\bibitem{Laskowski}
	Michael C. Laskowski, \textsl{A simpler axiomatization of the Shelah-Spencer almost sure theories,}
	Israel J. Math. \textbf{161} (2007), 157-186. MR MR2350161

\end{thebibliography}

\end{document}
