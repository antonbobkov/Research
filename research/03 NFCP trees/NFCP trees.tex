\documentclass{amsart}

\usepackage{../AMC_style}	
\usepackage{../Research}

\usepackage{tikz}

\DeclareMathOperator{\TT}{\boldface T}
\DeclareMathOperator{\A}{\boldface A}
\DeclareMathOperator{\B}{\boldface B}
\DeclareMathOperator{\PR}{P}

\begin{document}

\title{NFCP trees}
\author{Anton Bobkov}
\email{bobkov@math.ucla.edu}
%more info

\begin{abstract}
	We investigate stable NFCP trees. 
\end{abstract}

\maketitle

\section{NFCP for stable trees}
Parigot in \cite{parigot_trees} proves that stable trees are exactly trees of finite height. Here we study them further, stating equivalent conditions for having NFCP property. Final result of this section is theorem \ref{th_tree_nfcp} where we show that having NFCP is the same as being $\aleph_0$-categorical and also provide a simple graph theoretic characterization of NFCP.

In this section all the considered trees $T$ are stable.

\begin{Definition}
Consider a tree $T$ and $n \leq m$ with $n \in \N, m \in \N \cup \{\infty\}$. Define $T \midr [n,m]$ to be the induced subtree of $T$ obtained restricting nodes at depth $[n,m]$. Call $T \midr [n, \infty]$ the \emph{$n$th-slice} of $T$.
\end{Definition}

\begin{Definition}
	Consider a tree $T$ of height $N$. Let $T_n$ denote the collection of connected components in the $n$th-slice of $T$. $T$ is called \emph{almost finite} if for every $n \leq N$, $S_n$ contains finitely many elements up to a (poset) isomorphism.
\end{Definition}

\begin{Definition}
	Given an element $t \in T$ in a tree, let $A_t = \{a \in T \mid a > t\}$ denote all the elements below $t$. Call a connected component of $A_t$ a \emph{cone} of $t$.
\end{Definition}

Given $T$ suppose $T_n$ is finite. We associate a coding sequence to every node at depth $n-1$. First denote all elments of $T_n$ as $C_1, \ldots, C_N$. Given a node $t$ at depth $n-1$ we will construct a sequence $c_1, \ldots, c_N$ of elements in $\N \cup \{\infty\}$. $c_i$ counts all the cones of $t$ with isomorphism class $C_i$.

\begin{Lemma} \label{lm_tree_code}
	Suppose we have a countable tree $T$ with $T_n$ finite. Two nodes $t,s$ at depth $n$ have the same code if and only if $A_t$ is isomorphic to $A_s$.
\end{Lemma}

\begin{proof}
	Clear.
\end{proof}

\begin{Lemma} \label{lm_categoricity}
	Suppose $T$ is almost finite and countable. Then all the non-isomorphic connected components have different theories.
\end{Lemma}

\begin{proof}
	Note that in almost finite theory all slices are also almost finite. Prove the statement by the reverse induction on slices' depth. Suppose we have proven the claim for $n$th slice. As $T_n$ is finite and countable, we can apply Lemma \ref{lm_tree_code} to obtain codes for nodes at depth $n-1$. By induction assumption all (finitely many) elements of $T_n$ have different theories. For each isomorphism class $C_i \in T_n$ we can pick a sentence $\phi_i$ such that $\forall C \in T_n \  C = C_i \iff C \models \phi_i$. If two elements $t,s$ at depth $n-1$ have different codes, then they have different number of cones with some isomorphism class $C_i$. As having $C_i$ as an isomorphism class is witnessed by $\phi_i$ we can construct a formula that tells apart $t,s$.
	% technically we have to change phi_i to a downward function.
\end{proof}

\begin{Theorem} \label{th_tree_nfcp}
	Let $T$ be a stable tree of height $N$. The following are equivalent:
	\begin{enumerate}
		\item $T$ is $\aleph_0$-categorical
		\item $T$ has NFCP
		\item $T$ is almost finite
		\item Every element $t \in T$ has finitely many child cones up to a (poset) isomorphism and $T_0$ is finite.
	\end{enumerate}
\end{Theorem}

Note that conditions (3) and (4) are purely combinatorial.

\begin{proof}
	$(1) \Rightarrow (2)$. This is true in arbitrary theories. For a given arity $\aleph_0$-categorical theories have finitely many types, all of them isolated. This means that for a given formula $\phi(x, y)$ we can list all the types of $y$ for which there are infinitely many $x$ such that $\phi(x, y)$ holds. There are finitely many such types and all of them are isolated, so we can code it by single formula - disjunction of isolating formulas.
	
	$(2) \Rightarrow (3)$. We prove this by contrapositive. Suppose $T$ is not almost finite. Pick largest $n$ such that $n$-slice has infinitely many isomorphism classes. Thus $(n+1)$-slice is almost finite. Do construction as in lemma to obtain codes for nodes at depth $n$. There are infinitely many isomorphism classes for those thus there are infnitely many codes realized. As every code is a finite sequence, there has to be $i$ such $i$th position of the sequences has to take arbitrarily large finite values. Let $\phi(x,y)$ be a formula such that $\phi(T, t)$ equals to the $i$th position in the sequence coding $t$. This formula fails to have NFCP.
	
	$(3) \Rightarrow (1)$ This is exactly Lemma \ref{lm_tree_code} % not really
	
	$(3) \Leftrightarrow (4)$ Forward direction is trivial. Converse we prove this by contrapositive. Suppose $T$ is not almost finite. Pick the largest $n$ such that $T_n$ is infinite. Then $T_{n+1}$ is almost finite. If $n=0$ this contradicts $T_0$ being finite. Otherwise there has to be a node at depth $n-1$ that has infinitely many non-isomorphic nodes under it. 
\end{proof}

\begin{thebibliography}{9}

\bibitem{parigot_trees}
	Michel Parigot.
	Th\'eories d'arbres.
	\textit{Journal of Symbolic Logic}, 47, 1982.
	
\end{thebibliography}


\end{document}