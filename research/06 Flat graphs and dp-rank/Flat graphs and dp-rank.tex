\documentclass{amsart}

\usepackage{../AMC_style}	
\usepackage{../Research}


\begin{document}

\title{Superflat graphs are dp-minimal}
\author{Anton Bobkov}
\email{bobkov@math.ucla.edu}

\begin{abstract}
	We show that the theory of superflat graphs is dp-minimal.
\end{abstract}

\maketitle

\section{Preliminaries}

We work with an infinite graph $G$ and a subset of vertices $V \subset V(G)$. Say that $V$ is $n$-connected if there aren't a set of $n-1$ vertices removing which disconnects every pair of vertices in $V$. Connectivity of $V$ is the smallest $n$ such that $V$ are $n$-connected.

\begin{Definition}
	Suppose $V \subset V(G)$ has finite connectivity $n+1$. Let connectivity hull of $V$ to be union of all $n$-point sets that disconnect it.
\end{Definition}

\begin{Note}
	If $V$ has finite connectivity $n+1$, then having finite connectivity hull is the same as having finitely many $n$-point sets that disconnect it.
\end{Note}

\begin{Definition}
	Let $V \subset V(G)$. We say that a set is minimal with respect to $V$ when that set disconnects $V$ and is minimal among such sets (ordered by inclusion).
\end{Definition}

\section{Connectivity hull is finite}

Here we show our main technical lemma. This section is purely combinatorial, with no mention of model theory.

\begin{Lemma}
	Suppose $V = \{a,b\}$ is subset of  $V(G)$ with finite connectivity. Then its connectivity hull is finite.
\end{Lemma}

\begin{Corollary}
	Suppose $V$ is a finite subset of $V(G)$ with finite connectivity. Then its connectivity hull is finite.
\end{Corollary}

\begin{proof}
	Fix set $P = {p_1, \ldots, p_m}$ of all unordered pairs from $V$. Every pair $p_i$ has connectivity $n_i$ and by previous lemma has finitely many sets of $n_i$ points that disconnect it, denoted by $S_i$. Consider a finite minimal set $D$ that disconnects $V$. Define $D_i$ to be one of the sets in $S_i$ such that $D_i \subset D$ (one always exists). Then $D = \cup_{i \in I} D_i$ (if it was larger that would contradict minimality). Thus minimal sets are determined by unions of sets in $\{S_1 \ldots S_m\}$ and there are finitely many of such possible sets as each $S_i$ is finite. Connectivity hull of $V$ is a union of some finite minimal sets thus it has to be finite.
\end{proof}

\begin{Corollary}
	Suppose $V$ is a countable subset of $V(G)$ with finite connectivity. Then its connectivity hull is finite.
\end{Corollary}

\begin{proof}
	Let $n+1$ be connectivity of $V$. Order $V = \{v_1, v_2, \ldots\}$ and consider increasing finite parts $V_i = \{v_1, \dots, v_i\}$. Connectivity of $V_i$ as a function of $i$ is non-decreasing and is bounded by connectivity of $V$ which is $n+1$. Suppose connectivity of all $V_i$ is less than $n+1$ for all $i$ then by compactness connectivity of $V$ would be less than $n+1$ as well, which is a contradiction. Thus for large enough $i$, let's say $\forall i \geq N$, connectivity of $V_i$ is $n+1$. Let $H_N$ denote connectivity hull of $V_N$ and $H$ denote connectivity hull of $V$. As $V_N \subset V$ we have that $H \subset V_N$ as any $n$-point set disconnecting $V$ would also disconnect smaller set $V_N$. $V_N$ is finite by the previous corollary, so $V$ has to be finite as well.
\end{proof}

\section{Application to indiscernible sequences}

In this section we work in a flat graph. It is stable so all the indiscernible sequences are totally indiscernible. Also note that by indiscernibility all pairwise distances between points are the same.

We will need a refined notion of connectivity for the following argument to work. Suppose we have two points $a,b$ distance $n$ apart. Denote $P(a,b)$ union of all paths of length $n$ going from $a$ to $b$. If we have a collection of vertices $V$ such that every two have distance $n$ between them, denote

Let $V \subset V(G)$. Denote $P_n(V)$ a union of all paths of length $\leq n$ between points of $V$.

\begin{align*}
	P(V) = \bigcup_{a \neq b \in V} P(a,b)
\end{align*}

\begin{Lemma}
	Let $(a_i)_{i \in I}$ be a countable indiscernible sequence over $A$. Fix $n \in \N$. There exists a finite set $B$ such that
	\begin{align*}
		\forall i \neq j \ d_B(a_i, a_j) > n
	\end{align*}
\end{Lemma}

\begin{proof}
	By a flatness result we can find an infinite $J \subset I$ and a finite set $B'$ such that each pair from $(a_j)_{j \in J}$ have distance $>n$ over $B'$. Using total indiscernibility we have an automorphism sending $(a_j)_{j \in J}$ to $(a_i)_{i \in I}$. Image of $B'$ under this automorphism is the required set $B$.
\end{proof}

In other words, $B$ disconnects $P_n(\{a_i\})$. This shows that $\{a_i\}$ has finite connectivity in $P(\{a_i\})$. Applying lemma from last section we obtain that connectivity hull of $\{a_i\}$ in $P_n(\{a_i\})$ is finite.

\begin{Lemma}
	Connectivity hull described above is definable.
\end{Lemma}

\begin{proof}
	Consider finite parts of the sequence $I_i = \{a_1, a_2, \ldots, a_i\}$. $P(I_i)$ is $I_i$-definable as union of all $n$-paths. Connectivity hull is $I_i$-definable as well. With increasing $i$ it should stabilize.
\end{proof}

\begin{Lemma}
	$\{a_i\}$ is indiscernible over the hull $\cup A$.
\end{Lemma}

\begin{proof}
	Denote the hull by $H$. Fix an $A$-formula $\phi(x,y)$. Consider a collection of traces $\phi(\vec a_i, H^\{|y|\})$ for $i \in I$. Those are either all distinct or all the same. Finiteness of $H$ forces latter. This shows indiscernability.
\end{proof}

\begin{Corollary}
	Let $(a_i)_{i \in I}$ be a countable indiscernible sequence over $A$. Then there is a countable $B$ such that  $(a_i)$ is indiscernible over $A \cup B$ and
	\begin{align*}
		\forall i \neq j \ d_B(a_i, a_j) = \infty
	\end{align*}
\end{Corollary}

\begin{proof}
	Keep applying previous lemma to obtain larger $B_i$ that provide higher separation while preserving indiscernibility.
\end{proof}

That is every indiscernible sequence can be upgraded to have infinite distance over its parameter set.

\section{Superflat graphs are dp-minimal}

\begin{Lemma}
	Suppose $a \equiv_A b$ and $d_A(a, c) = d_A(b, c) = \infty$. Then $a \equiv_{Ac} b$
\end{Lemma}

\begin{proof}
	partial automorphisms
\end{proof}

\begin{Theorem}
	Let $G$ be a flat graph with $(a_i)_{i\in\Q}$ indiscernible over $A$ and $b \in G$. There exists $c \in \Q$ such that all $(a_i)_{i\in\{\Q - c\}}$ have the same type over $Ab$.
\end{Theorem}

\begin{proof}
	Find $B \supseteq A$ such that $(a_i)$ is indiscernible over $B$ and has infinite distance over $B$. $b$ can have finite distance over $B$ to only one member of the sequence. Let $C$ be that member. Remainder of elements have the same type over $Bb$ by the lemma.
\end{proof}

\begin{Corollary}
	Flat graphs are dp-minimal.
\end{Corollary}

\end{document}
