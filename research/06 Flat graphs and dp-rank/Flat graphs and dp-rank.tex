\documentclass{amsart}

\usepackage{../AMC_style}	
\usepackage{../Research}

\DeclareMathOperator{\I}{\mathcal I}
\DeclareMathOperator{\J}{\mathcal J}

\begin{document}

\title{Superflat graphs are dp-minimal}
\author{Anton Bobkov}
\email{bobkov@math.ucla.edu}

\begin{abstract}
	We show that the theory of superflat graphs is dp-minimal.
\end{abstract}

\maketitle

\section{Preliminaries}

Superflat graphs were introduced in \cite{stable_graphs} as a natural class of stable graphs. Here we present a direct proof showing dp-minimality.

First, we introduce some basic graph-theoretic definitions.
\begin{Definition}
	Work in an infinite graph $G$. Let $A, V \subset V(G)$ (where $V(G)$ denotes vertices of $G$)
	\begin{enumerate}
		\item $G' = G[V]$ is called \emph{induced} subgraph of $G$ \emph{spanned} by $V$ if it is obtained as a subgraph of $G$ by taking all edges between vertices in $V$.
		\item For $a,b \in V(G)$ define the \emph{distance} $d(a,b)$ to be the length of the shortest path between $a$ and $b$ in $G$.
		\item For $a,b \in V(G)$ define $d_A(a,b)$ to be the distance between $a$ and $b$ in $G[V(G) - A]$. Equivalently it is the shortest path between $a$ and $b$ that avoids vertices in $A$.
		\item We say that $A$ \emph{separates} $V$ if for all $a,b \in V$, $d_A(a,b) = \infty$.
		\item We say that $V$ has \emph{connectivity} $n$ if there are no sets of size $n-1$ in $V(G)$ that separates $V$.
		\item Suppose $V$ has finite connectivity $n$. \emph{Connectivity hull} of $V$ is defined to be the union of all sets separating $V$ of size $n-1$.
	\end{enumerate}
\end{Definition}

In \cite{infinite_megner} we find a generalization of Megner's Theorem for infinite graphs

\begin{Theorem} [Megner, Erd\H os, Aharoni, Berger]
	Let $A$ and $B$ be two sets of vertices in a possibly infinite digraph. Then there exist a set $P$ of disjoint $A–B$ paths, and a set $S$ of vertices separating $A$ from $B$, such that $S$ consists of a choice of precisely one vertex from each path in $P$.
\end{Theorem}

We use the following easy consequence

\begin{Corollary}
	Let $V$ be a subset of a graph $G$ with connectivity $n$. Then there exists a set of $n$ disjoint paths from $V$ into itself.
\end{Corollary}

\begin{Corollary} \label{cr_hull_finite}
	With assumptions as above, connectivity hull of $V$ is finite.
\end{Corollary}

\begin{proof}
	All the separating sets have to have exactly one vertex in each of those paths. 
\end{proof}

\begin{Definition}
	Denote by $K^m_n$ an $m$-subdivision of the complete graph on $n$ vertices.
	Graph is called superflat if for every $m \in \N$ there is $n \in \N$ such that the graph avoids $K^m_n$ as a subgraph. 
\end{Definition}

Theorem 2 in \cite{stable_graphs} gives a useful characterization of superflat graphs.

\begin{Theorem} \label{th_superflat_equivalence}
	The following are equivalent
	\begin{enumerate}
		\item $G$ is superflat
		\item For every $n \in \N$ and an infinite set $A \subset V(G)$, there exists a finite $B \subset V(G)$ and infinite $A' \subseteq A$ such that for all $x,y \in A'$ we have $d_{B}(x, y) > n$.
	\end{enumerate}
\end{Theorem}

Roughly, in superflat graphs every infinite set contains a sparse infinite subset (possibly after throwing away finitely many nodes).

\section{Indiscernible sequences}

In this section we work in a superflat graph $G$. Stability implies that all the indiscernible sequences are totally indiscernible.

\begin{Definition}
	Let $V \subset V(G)$. $P_n(V)$, a subgraph of $G$ denotes a union of all paths of length $\leq n$ between points of $V$.
\end{Definition}

\begin{Lemma}
	Let $I = (a_i : i \in \I)$ be a countable indiscernible sequence over $A$. Fix $n \in \N$.
	There exists a finite set $B$ such that
	\begin{align*}
		\forall i \neq j \ d_B(a_i, a_j) > n
	\end{align*}
\end{Lemma}

\begin{proof}
	By a \ref{th_superflat_equivalence} we can find an infinite $\J \subset \I$ and a finite set $B'$ such that each pair from $J = (a_j : j \in \J)$ have distance $>n$ over $B'$.
	Using total indiscernibility we have an automorphism sending $J$ to $I$.
	Image of $B'$ under this automorphism is the required set $B$.
\end{proof}

In other words, $B$ separates $P_n(I)$.
This shows that $I$ has finite connectivity in $P_n(I)$.
Applying Corollary \ref{cr_hull_finite} we obtain that connectivity hull of $I$ in $P_n(I)$ is finite.

\begin{Definition}
	We call a set $H \subseteq V(G)$ uniformly definable from an indiscernible sequence $I$ if there is a formula $\phi(x, y)$ such that for every $J \subset I$ of size $|y|$ we have
	\begin{align*}
		H = \{g \in G \mid \phi(g, J)\}
	\end{align*}
	where $J$ is considered a tuple.
\end{Definition}

\begin{Lemma} \label{lm_uniform}
	Fix a countable indiscernible sequence $I = (a_i : i \in \I)$.
	Let $H$ be its connectivity hull inside of graph $P_n(I)$.
	Then $H$ is uniformly definable from $I$ in $G$.
\end{Lemma}

\begin{Definition}
	Given a graph $G$ and $V \subset V(G)$ define $H(G, V)$ to be connectivity hull of $V$ in $G$.
\end{Definition}

\begin{Note}
	Given a finite $V$ we have $H(P_n(V), V)$ is $V$-definable.
\end{Note}

\begin{proof}(of \ref{lm_uniform})
	Consider finite parts of the sequence $I_i = \{a_1, a_2, \ldots, a_i\}$. We study $H_i = H(P_n(I_i), I_i)$ as a function of $i$ as approximations of the hull $H(P_n(I), I)$. We have the following properties
	\begin{align*}
		 \forall i \ H(P_n(I_i), I_i) &\subseteq H(P_n(I), I_i) \\
		 \forall i \leq j \ H(P_n(I), I_i) &\supseteq H(P_n(I), I_j)
	\end{align*}
		Eventually $H(P_n(I_i))$ contains $n$ disjoint paths for the whole graph, thus stabilizes at $H(P_n(I), I)$. This shows that for large enough $i>N$ we have $H_i = H_{i+m}$. By symmetry of indiscernible sequence we have that any subset of size $N$ defines the connectivity hull.
\end{proof}

\begin{Lemma}
	$I$ is indiscernible over the $A \cup H(P_n(I), I)$.
\end{Lemma}

\begin{proof}
	Denote the hull by $H$. Fix an $A$-formula $\phi(x,y)$. Consider a collection of traces $\phi(\vec a, H^\{|y|\})$ for $\vec a \in I^{|x|}$. As $H$ is $I$ definable those are either all distinct or all the same. Finiteness of $H$ forces latter. This shows indiscernability.
\end{proof}

\begin{Corollary}
	Let $(a_i)_{i \in I}$ be a countable indiscernible sequence over $A$. Then there is a countable $B$ such that  $(a_i)$ is indiscernible over $A \cup B$ and
	\begin{align*}
		\forall i \neq j \ d_B(a_i, a_j) = \infty
	\end{align*}
\end{Corollary}

\begin{proof}
	Let $B_i = H(P_i(I), I)$. Successive applications of previous lemma yield the appropriate set $B = \bigcup B_i$.
\end{proof}

That is every indiscernible sequence can be upgraded to have infinite distance over its parameter set.

\section{Superflat graphs are dp-minimal}

\begin{Lemma}
	Suppose $x \equiv_A y$ and $d_A(x, c) = d_A(y, c) = \infty$. Then $x \equiv_{Ac} y$
\end{Lemma}

\begin{proof}
	Define an equivalence relation $G - A$. Two points $p, q$ are equivalent if $d_A(p,q)$ is finite. There is an automorphism $f$ of $G$ fixing $A$ sending $x$ to $y$. Denote by $X$ and $Y$ equivalence classes of $x$ and $y$ respectively. It's easy to see that $f(X) = Y$. Define the following function
	\begin{align*}
		&g = f \text { on } X \\
		&g = f^{-1} \text { on } Y \\
		&\text{identity otherwise}
	\end{align*}
	It is easy to see that $g$ is an automorphism fixing $Ac$ that sends $x$ to $y$.
\end{proof}

\begin{Theorem}
	Let $G$ be a flat graph with $(a_i)_{i\in\Q}$ indiscernible over $A$ and $b \in G$. There exists $c \in \Q$ such that all $(a_i)_{i\in\{\Q - c\}}$ have the same type over $Ab$.
\end{Theorem}

\begin{proof}
	Find $B \supseteq A$ such that $(a_i)$ is indiscernible over $B$ and has infinite distance over $B$. All the elements of the indiscernible sequence fall into distinct equivalence classes. $b$ can be in at most one of them. Exclude that element from the sequence. Remaining sequence elements are all infinitely far away from $b$. By previous lemma we have that elements of indiscernible sequence all have the same type over $Bb$.
\end{proof}

But this is exactly what it means to be dp-minimal, as given, say, in \cite{simon_dp_minimal} Lemma 1.4.4

\begin{Corollary}
	Flat graphs are dp-minimal.
\end{Corollary}


\begin{thebibliography}{9}

\bibitem{stable_graphs}
	Klaus-Peter Podewski and Martin Ziegler. Stable graphs. \textit{Fund. Math.}, 100:101-107, 1978.

\bibitem{infinite_megner}
	Aharoni, Ron and Berger, Eli (2009). "Menger's Theorem for infinite graphs". \textit{Inventiones Mathematicae} 176: 1–62
	
\bibitem{simon_dp_minimal}
	P. Simon, \textit{On dp-minimal ordered structures}, J. Symbolic Logic 76 (2011), no. 2, 448–460.

%\bibitem{diestel}
%	Reinhard Diestel. \textit{Graph Theory}, volume 173 of \textit{Grad. Texts in Math.} Springer, 2005.

\end{thebibliography}

\end{document}
