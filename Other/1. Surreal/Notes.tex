\documentclass{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{enumerate}
\usepackage{colonequals}
\usepackage{fullpage}

\newcommand{\No}{\mathbf{No}}
\newcommand{\On}{\mathbf{On}}
\newcommand{\paren}[1]{\left( #1 \right)}
\newcommand{\brac}[1]{\left[ #1 \right]}
\newcommand{\curly}[1]{\left\{ #1 \right\}}
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\rar}{\rightarrow}

\newtheorem{theorem}{Theorem}
\newtheorem{question}{Question}
\newtheorem{defn}{Definition}
\newtheorem{cor}{Corollary}
\newtheorem{claim}{Claim}
\newtheorem{lem}{Lemma}

\newcommand{\R}{\mathbb{R}}
\newcommand{\concat}{\mathbin{\raisebox{1ex}{\scalebox{.7}{$\frown$}}}} %sequence concatenation
\newcommand{\dom}[1]{\operatorname{dom}\paren{#1}}
\newcommand{\ZFC}{\mathsf{ZFC}}
\newcommand{\NBG}{\mathsf{NBG}}
\newcommand{\coloneq}{\colonequals}
\newcommand{\N}{\mathbb{N}}

\DeclareMathOperator{\supp}{supp}

\newcommand{\w}{\omega}
\newcommand{\midr}[1]{\restriction_{#1}}

\title{Notes on Surreal Numbers \\ Math 285: Fall 2014}
\author{Class Taught by Prof. Aschenbrenner \\ Notes by John Susice}
\date{\today}
\begin{document}
\maketitle{}

\section*{Day 1: Friday October 3, 2014}

We define a map which will eventually be proven to be an ordered field isomorphism.

\begin{align*}
  K = \R((t^\No)) \overset{\sim}{\longrightarrow} \No
\end{align*}

We have an element written as 
\begin{align*}
	&f = \sum_{\gamma \in \No} f_\gamma t^\gamma \\
	&\supp(f) = \{\gamma \colon f_\gamma \neq 0\}
\end{align*}
where $\supp(f)$ is a well-ordered sub\textbf{set}. Now let $x = t^{-1}$ and write
\begin{align*}
  f(x) = \sum_{i < \alpha} f_i x^{a_i}
\end{align*}
where $(a_i)_{i<\alpha}$ is strictly decreasing in $\No$, $\alpha$ ordinal and $f_i \in \R$ for $i < \alpha$. Also define $l(f(x))$ to be the order type of $\supp(f)$ (which may be smaller than $\alpha$ as we allow zero coefficients).

\begin{question}
	What is the relationship of what we are going to do with Kaplansky's results from valuation theory?
\end{question}

Define $\sum_{i < \alpha} f_i \w^{a_i} = f(\omega)$ recursively on $\alpha$: \\ 
When $\alpha = \beta + 1$ is a successor:
\begin{align*}
	\sum_{i < \alpha} f_i \w^{a_i} = \paren{\sum_{i < \beta} f_i \omega^{a_i}} + f_\beta \w^{a_\beta}
\end{align*}
When $\alpha$ is a limit ordinal:
\begin{align*}
	\sum_{i < \alpha} f_i \w^{a_i} = \curly{L \mid R}
\end{align*}
with
\begin{align*}
  L &= \curly{\sum_{i < \beta} f_i \w^{a_i} + (f_\beta - \epsilon) \w^{a_\beta}
	\colon \beta < \alpha, \epsilon \in \R^{>0}} \\
  R &= \curly{\sum_{i < \beta} f_i \w^{a_i} + (f_\beta + \epsilon) \w^{a_\beta}
	\colon \beta < \alpha, \epsilon \in \R^{>0}}
\end{align*}

\begin{enumerate}
	\item $f(x) > g(x) \Rightarrow f(\w) > g(\w)$
	\item if $\gamma < \kappa < \alpha$, then (tail property)
	\begin{align*}
		\left| \sum_{i < \alpha} f_i \w^{a_i} - \sum_{i < \kappa} f_i \w^{a_i} \right| << \w^{a_\gamma}
	\end{align*}
\end{enumerate}

Suppose we have
\begin{align*}
  f(x) &= \sum_{i < \alpha} f_i x^{a_i} \\
  g(x) &= \sum_{i < \alpha} g_i x^{a_i}
\end{align*}

Suppose $f(x) < g(x)$

Choose $\gamma$ smallest such that $f_\gamma \neq g_\gamma$.
It has to be that $f_\gamma > g_\gamma$. Also $f(x)\midr\gamma = g(x)\midr\gamma$

Case 1: $\alpha = \beta + 1$

\begin{align*}
  f(x) &= f(x)\midr\beta + f_\beta x^{a_\beta}\\
  g(x) &= g(x)\midr\beta + g_\beta x^{a_\beta}
\end{align*}

Suppose $\gamma = \beta$.
Then $\bar f(x) = \bar g(x)$, $\bar f(\w) = \bar g(\w)$, so compute
\begin{align*}
  f(\w) - g(\w) &= \\
	&= f(\w)\midr\beta + f_\beta \w^{a_\beta} - g(\w)\midr\beta - g_\beta \w^{a_\beta} \\
	&= f_\beta \w^{a_\beta} - g_\beta \w^{a_\beta} \\
	&= \paren{f_\beta - g_\beta} \w^{a_\beta} > 0
\end{align*}

Now suppose $\gamma < \beta$.

%\begin{align*}
%  f(x) &= \sum_{i < \gamma} f_i x^{a_i} + f_\gamma x^{a_\gamma} + \sum_{\gamma < i < \beta} f_i x^{a_i} + f_\beta x^{a_\beta} \\
%  g(x) &= \sum_{i < \gamma} g_i x^{a_i} + g_\gamma x^{a_\gamma} + \sum_{\gamma < i < \beta} g_i x^{a_i} + g_\beta x^{a_\beta}
%\end{align*}
Group the terms
\begin{align*}
  f(\w) &= h(\w) + f_\gamma \w^{a_\gamma} + f^* + f_\beta \w^{a_\beta} \\
  g(\w) &= h(\w) + g_\gamma \w^{a_\gamma} + g^* + g_\beta \w^{a_\beta}
\end{align*}
where
\begin{align*}
	h(\w) &= f(\w)\midr\gamma = g(\w)\midr\gamma \\
	f^* &= f(\w)\midr\beta - f(\w)\midr{\gamma + 1} \\
	g^* &= g(\w)\midr\beta - g(\w)\midr{\gamma + 1}
\end{align*}

Then we have by tail property $f^* << x^{a_\gamma}$ and $g^* << x^{a_\gamma}$. Compute

\begin{align*}
  f(\w) - g(\w) &= (f_\gamma - g_\gamma) x^{a_\gamma} + (f* - g*) + (f_\beta - g_\beta) x^{a_\beta}
\end{align*}

We have $f_\gamma > g_\gamma$.
All $f*$, $g*$ and $(f_\beta - g_\beta) x^{a_\beta}$ are  $<< x^{a_\gamma}$.
Thus $f(\w) - g(\w) > 0$ as needed.

Case 2: $\alpha$ is a limit ordinal.

$f(\w)$ and $g(\w)$ are defined as 

\begin{align*}
  f(\w) &= \curly{L_f \mid R_f} \\
  g(\w) &= \curly{L_g \mid R_g}
\end{align*}

Recall that

\begin{align*}
  L_f &= \curly{\sum_{i < \beta} f_i \w^{a_i} + (f_\beta - \epsilon) \w^{a_\beta}
	\colon \beta < \alpha, \epsilon \in \R^{>0}} \\
  R_g &= \curly{\sum_{i < \beta} g_i \w^{a_i} + (g_\beta + \epsilon) \w^{a_\beta}
	\colon \beta < \alpha, \epsilon \in \R^{>0}}
\end{align*}

Pick any $\beta$ with $\gamma < \beta < \alpha$ and $\epsilon \in \R^{>0}$,
and pick limit elements $\bar f(\w) \in L_f$ and $\bar g(\w) \in R_g$ corresponding to $\beta, \epsilon$.

Then $\bar f(x) < \bar g(x)$ as first coefficient where they differ is $x^{a_\gamma}$ and $f_\gamma > g_\gamma$.
Thus by inductive hypothesis $\bar f(\w) < \bar g(\w)$.
As choice of those was arbitrary we have $L_f < R_g$ so $f(\w) > g(\w)$.

Tail property

It is easy to see that statement holds for all $\gamma < \kappa < \alpha$ iff it holds for all $\gamma < \kappa \leq \alpha$.

Case 1: $\alpha = \beta + 1$.

Suppose we have $\gamma < \kappa < \alpha$, then $\gamma < \kappa \leq \beta$ and induction hypothesis applies.

\begin{align*}
	&\sum_{i < \alpha} f_i \w^{a_i} - \sum_{i < \kappa} f_i \w^{a_i} = \\
	&\brac{\sum_{i < \beta} f_i \w^{a_i} - \sum_{i < \kappa} f_i \w^{a_i}} + f_\alpha \w^{a_\alpha}
\end{align*}

Expression $\brac{\ldots}$ is $<< \w^{a_\gamma}$ by induction hypothesis. $f_\alpha \w^{a_\alpha} << \w^{a_\gamma}$ as $a_\alpha < a_\gamma$. Thus the entire sum is $<< \w^{a_\gamma}$ as needed.

Case 2: $\alpha$ is a limit ordinal.

Write definitions of $f(\w)$ using $\kappa$

\begin{align*}
  f(\w) &= \curly{L_f \mid R_f} \\
  F(\w) &= f(\w)\midr\kappa = \sum_{i < \kappa} f_i \w^{a_i}
\end{align*}

\begin{align*}
  L_f &= \curly{\sum_{i < \beta} f_i \w^{a_i} + (f_\beta - \epsilon) \w^{a_\beta}
	\colon \beta < \alpha, \epsilon \in \R^{>0}} \\
  R_f &= \curly{\sum_{i < \beta} f_i \w^{a_i} + (f_\beta + \epsilon) \w^{a_\beta}
	\colon \beta < \alpha, \epsilon \in \R^{>0}} \\
\end{align*}

Pick any $\beta$ with $\kappa < \beta < \alpha$ and $\epsilon \in \R^{>0}$,
and pick limit elements $\bar l(\w) \in L_f$ and $\bar r(\w) \in R_f$ corresponding to $\beta, \epsilon$.

By induction hypothesis we have 
\begin{align*}
	\bar l(\w) - F(\w) &= \bar l(\w) - \bar l(\w)\midr\kappa \ <<  \w^{a_\kappa} \\
	\bar r(\w) - F(\w) &= \bar r(\w) - \bar r(\w)\midr\kappa \ <<  \w^{a_\kappa}
\end{align*}

\begin{align*}
	l(\w) \leq f(\w) \leq r(\w) \\
\end{align*}
\begin{align*}
	l(\w) - F(\w) \leq f(\w) - F(\w) \leq r(\w) - F(\w)
\end{align*}
 
Thus $f(\w) - F(\w) << \w^{a_\kappa}$ as it is between two elements that are $<<  \w^{a_\kappa}$.

\end{document}

